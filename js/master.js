var lib = [
  {
    id: 0,
    origin: 'ch',
    name: 'Library of Heaven’s Path',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/library-of-heavens-path/',
    picSource: 'https://cdn.novelupdates.com/images/2017/03/Library-of-Heaven%E2%80%99s-Path.jpg',
    description: 'Traversing into another world, Zhang Xuan finds himself becoming an honorable teacher. Along with his transcension, a mysterious library appears in his mind. As long as it is something he has seen, regardless of whether it is a human or an object, a book on its weaknesses will be automatically compiled in the library. Thus, he becomes formidable. “Emperor Zhuoyang, why do you detest wearing your underwear so much? As an emperor, can’t you pay a little more attention to your image?” “Fairy Linglong, you can always look for me if you find yourself unable to sleep at night. I am skilled in lullabies!” “And you, Demon Lord Qiankun! Can you cut down on the garlic? Are you trying to kill me with that stench?” This is an incredible story about teachers and students, grooming and guiding the greatest experts in the world!'
  },
  {
    id: 1,
    origin: 'kr',
    name: 'The Book Eating Magician',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/the-book-eating-magician/',
    picSource: 'https://cdn-cms.f-static.com/uploads/430320/800_59f7da2df39d9.jpg',
    description: '[‘Lightning Magic Primer’ has been consumed. Your understanding is very high.] [The 2nd Circle magic ‘Lightning Bolt’ has been acquired.] The unprecedented magician who will eat all the magic books of the world has appeared.'
  },
  {
    id: 2,
    origin: 'ch',
    name: 'Monster Paradise',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/monster-paradise/',
    picSource: 'https://cdn.novelupdates.com/images/2017/11/Monster-Paradise.jpg',
    description: '800 years ago, 3000 dimensional gates opened across the entire world. In that moment, it was as if 3000 different colored eyes opened across the world as hordes of monsters swarmed out of these gates like tears. Some could destroy city walls with one strike; They had bodies the size of a giant and fed on humans. Some latched onto humans, absorbing their bodies’ nutrients and enslaving humans. Some infiltrated the humans’ cities, disguising themselves as normal human beings while feeding upon human blood to sustain themselves. In a night, the Human race fell to the bottom of the food chain. The world had turned into a paradise for monsters…'
  },
  {
    id: 3,
    origin: 'ch',
    name: 'Crossing to the Future, it’s Not Easy to Be a Man',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/crossing-to-the-future-its-not-easy-to-be-a-man/',
    picSource: 'https://cdn.novelupdates.com/images/2017/12/Crossing-to-the-Future-it%E2%80%99s-Not-Easy-to-Be-a-Man.jpg',
    description: 'After dying from a strange terminal illness, Ling Lan was reborn into a world 10000 years into the future. Although she dearly wished she could just live a peaceful and uneventful life in her new healthy body, fate had other plans … Forced to disguise herself as a boy just so she could inherit her deceased father’s premium military benefits, Ling Lan’s journey to adulthood was full of challenges. After much difficulty, she finally turned sixteen when she could drop the charade. But before she could grasp her newfound freedom to get married and start her own family, her resurrected father decided to go ahead and throw her into the Federation’s top military boys’ school. With these twists of fate, Ling Lan had little choice but to walk further and further down a path of no return, one of cold and aloof dominance …'
  },
  {
    id: 4,
    origin: 'kr',
    name: 'Dungeon Defense',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/dungeon-defense/',
    picSource: 'https://cdn.novelupdates.com/images/2016/07/Dungeon-Defense.jpg',
    description: 'Do you know how this world ends? Become the hero and defeat the 72 Demon Lords. The game that was boasted as the absolute hardest strategy game, 『Dungeon Attack』. I used to be the ‘hero’ that had accomplished everything in this game, but after answering a suspicious survey, I found myself in the game as the weakest Demon Lord, 「Dantalian」. With only my eloquent tongue and my memories of conquest as a hero—. In order to survive as Dantalian. I shall tear this world apart.'
  },
  {
    id: 5,
    origin: 'jp',
    name: 'Arifureta Shokugyou de Sekai Saikyou',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/arifureta-shokugyou-de-sekai-saikyou-ln/',
    picSource: 'https://cdn.novelupdates.com/images/2016/05/ari-1.png',
    description: 'Seventeen year old Hajime Nagumo is your average, everyday otaku. However, his simple life of pulling all-nighters and sleeping in school is suddenly turned upside down when he, along with the rest of his class, is summoned to a fantasy world! They’re treated like heroes and tasked with the duty of saving the human race from utter extinction. But what should have been any otaku’s wet dream quickly turns into Hajime’s nightmare. While the rest of his class are blessed with godlike powers, Hajime’s job, Synergist, only has a single transmutation skill. Ridiculed and bullied by his classmates for being weak, he soon finds himself in despair. Will he be able to survive in this dangerous world of monsters and demons with only a glorified blacksmith’s level of strength?'
  },
  {
    id: 6,
    origin: 'kr',
    name: 'Praise the Orc!',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/praise-the-orc/',
    picSource: 'https://cdn.novelupdates.com/images/2017/06/xxlarge2.jpeg',
    description: 'Praise the Orc! is about Jung Ian, a cafe owner with a dark past, jumping into the world of virtual reality in order to protect his sister from any predators. However, things may not be as simple as he first believed them to be. Witness as he explores the lands of Elder Lord as an orc, a species labeled as the “game creator’s mistake”, defeating any and all before him!'
  },
  {
    id: 7,
    origin: 'jp',
    name: 'Dungeon ni Deai o Motomeru no wa Machigatte Iru Darou ka',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/dungeon-ni-deai-o-motomeru-no-wa-machigatte-iru-darou-ka/',
    picSource: 'https://cdn.novelupdates.com/images/2015/08/dungeonni.jpg',
    description: 'Is it wrong to face the perils of Dungeon alone, in a single-member guild blessed by a failed goddess? Maybe. Is it wrong to dream of playing hero to hapless maidens in Dungeon? Maybe not. After one misguided adventure, Bell quickly discovers that anything can happen in the labyrinth-even chance encounters with beautiful women. Only problem? He’s the one who winds up the damsel in distress!'
  },
  {
    id: 8,
    origin: 'kr',
    name: 'Seoul Station’s Necromancer',
    ranking: 5,
    url: 'https://www.novelupdates.com/series/seoul-stations-necromancer/',
    picSource: 'https://cdn.novelupdates.com/images/2016/07/necro-1.jpg',
    description: '[You have entered the dungeon at Gwachun Station’s 1st Exit.] When former high school student Kang Woojin finds himself returned back to Earth after being forcibly summoned to a foreign planet for 20 years, he soon finds that Earth is not the same, normal place as he once remembered it to be. With his former strength and age reset back to zero, watch Kang Woojin as he gets back on the path to becoming the Earth’s strongest Necromancer!'
  },
  {
    id: 9,
    origin: '',
    name: '',
    ranking: 0,
    url: '',
    picSource: '',
    description: ''
  }
]

//First load of data when index.html is accessed
function indexBuild() {
  var names = document.querySelectorAll(".novel .title");
  var ranking = document.querySelectorAll(".novel .ranking");
  var holder = document.querySelectorAll(".novel .holder");
  var des = document.querySelectorAll(".novel .description");
  var parents = document.querySelectorAll(".novel");

  for (var i = 0; i < 3; i++) {
    names[i].innerHTML = lib[i].name;
    ranking[i].innerHTML = "Rating: "+lib[i].ranking+"/5";
    holder[i].innerHTML = '<a href="'+lib[i].picSource+'"><img src="'+lib[i].picSource+'" alt="'+lib[i].name+' Cover'+'" class="cover" width="230px" height="329px"></a>';

    var linkparent = document.createElement("div");
    linkparent.setAttribute("class", "linkparent");
    linkparent.innerHTML = '<a href="'+lib[i].url+'" class="link">More Information here</a>';
    parents[i].insertBefore(linkparent,des[i]);

    des[i].innerHTML = "<b>Description: </b><br>" + lib[i].description;
  }
}

//first load of data for top.html when its accessed
function topBuild() {
  var thumbnail = document.querySelectorAll(".thumbnail");

  for (var i = 0; i < 8; i++) {
    thumbnail[i].innerHTML = '<h4 class="info" onclick="openModal(' + lib[i].id + ')">i</h4><div class="holder"></div><h3 class="title"></h3><h4 class="ranking"></h4>'
  }

  var names = document.querySelectorAll(".line .title");
  var ranking = document.querySelectorAll(".line .ranking");
  var holder = document.querySelectorAll(".line .holder");
  var des = document.querySelectorAll(".line .description");

  for (var i = 0; i < 8; i++) {
    var insert = under40CharacterCheck(i);
    names[i].innerHTML = insert;
    ranking[i].innerHTML = "Rating: "+lib[i].ranking+"/5";
    holder[i].innerHTML = '<a href="'+lib[i].picSource+'"><img src="'+lib[i].picSource+'" alt="'+lib[i].name+' Cover'+'" class="cover" width="126px" height="181px"></a>';
  }
}

//takes as variable the id for the lib entry and inputs the data into the modal which is first hidden.
function openModal(i) {
  document.getElementById('modalTop').style.display = "block";

  var modal = document.querySelector(".modalContent");
  modal.innerHTML = '<h4 id="close" class="close" onclick="closeModal()">x</h4> <h3 class="title"></h3> <h4 class="ranking"></h4> <div class="holder"></div> <p class="description"></p>'

  var names = document.querySelector(".modalContent .title");
  var ranking = document.querySelector(".modalContent .ranking");
  var holder = document.querySelector(".modalContent .holder");
  var des = document.querySelector(".modalContent .description");

  names.innerHTML = lib[i].name;
  ranking.innerHTML = "Rating: "+lib[i].ranking+"/5";
  holder.innerHTML = '<a href="'+lib[i].picSource+'"><img src="'+lib[i].picSource+'" alt="'+lib[i].name+' Cover'+'" class="cover" width="230px" height="329px"></a>';

  var linkparent = document.createElement("div");
  linkparent.setAttribute("class", "linkparent");
  linkparent.innerHTML = '<a href="'+lib[i].url+'" class="link">More Information here</a>';
  modal.insertBefore(linkparent,des);

  des.innerHTML = "<b>Description: </b><br>" + lib[i].description;

}

//closes the modal
function closeModal() {
  document.getElementById('modalTop').style.display = "none";
  document.querySelector(".modalContent").innerHTML = "";
}

function under40CharacterCheck(i) {
  var text = '';
  if (lib[i].name.length > 40) {
    text = lib[i].name.slice(0, 38) + "...";
  } else {
    text = lib[i].name;
  }
  return text
}
